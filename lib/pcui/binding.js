!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.pcuiExternal=e():t.pcuiExternal=e()}(window,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=67)}({6:function(t,e,n){"use strict";t.exports=n(61)},61:function(t,e,n){"use strict";
/** @license React v16.13.1
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(62),i="function"==typeof Symbol&&Symbol.for,o=i?Symbol.for("react.element"):60103,s=i?Symbol.for("react.portal"):60106,a=i?Symbol.for("react.fragment"):60107,u=i?Symbol.for("react.strict_mode"):60108,l=i?Symbol.for("react.profiler"):60114,c=i?Symbol.for("react.provider"):60109,f=i?Symbol.for("react.context"):60110,h=i?Symbol.for("react.forward_ref"):60112,p=i?Symbol.for("react.suspense"):60113,d=i?Symbol.for("react.memo"):60115,y=i?Symbol.for("react.lazy"):60116,_="function"==typeof Symbol&&Symbol.iterator;function v(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m={};function g(t,e,n){this.props=t,this.context=e,this.refs=m,this.updater=n||b}function O(){}function j(t,e,n){this.props=t,this.context=e,this.refs=m,this.updater=n||b}g.prototype.isReactComponent={},g.prototype.setState=function(t,e){if("object"!=typeof t&&"function"!=typeof t&&null!=t)throw Error(v(85));this.updater.enqueueSetState(this,t,e,"setState")},g.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},O.prototype=g.prototype;var x=j.prototype=new O;x.constructor=j,r(x,g.prototype),x.isPureReactComponent=!0;var k={current:null},P=Object.prototype.hasOwnProperty,w={key:!0,ref:!0,__self:!0,__source:!0};function E(t,e,n){var r,i={},s=null,a=null;if(null!=e)for(r in void 0!==e.ref&&(a=e.ref),void 0!==e.key&&(s=""+e.key),e)P.call(e,r)&&!w.hasOwnProperty(r)&&(i[r]=e[r]);var u=arguments.length-2;if(1===u)i.children=n;else if(1<u){for(var l=Array(u),c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in u=t.defaultProps)void 0===i[r]&&(i[r]=u[r]);return{$$typeof:o,type:t,key:s,ref:a,props:i,_owner:k.current}}function R(t){return"object"==typeof t&&null!==t&&t.$$typeof===o}var S=/\/+/g,C=[];function T(t,e,n,r){if(C.length){var i=C.pop();return i.result=t,i.keyPrefix=e,i.func=n,i.context=r,i.count=0,i}return{result:t,keyPrefix:e,func:n,context:r,count:0}}function A(t){t.result=null,t.keyPrefix=null,t.func=null,t.context=null,t.count=0,10>C.length&&C.push(t)}function V(t,e,n){return null==t?0:function t(e,n,r,i){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var u=!1;if(null===e)u=!0;else switch(a){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case o:case s:u=!0}}if(u)return r(i,e,""===n?"."+U(e,0):n),1;if(u=0,n=""===n?".":n+":",Array.isArray(e))for(var l=0;l<e.length;l++){var c=n+U(a=e[l],l);u+=t(a,c,r,i)}else if(null===e||"object"!=typeof e?c=null:c="function"==typeof(c=_&&e[_]||e["@@iterator"])?c:null,"function"==typeof c)for(e=c.call(e),l=0;!(a=e.next()).done;)u+=t(a=a.value,c=n+U(a,l++),r,i);else if("object"===a)throw r=""+e,Error(v(31,"[object Object]"===r?"object with keys {"+Object.keys(e).join(", ")+"}":r,""));return u}(t,"",e,n)}function U(t,e){return"object"==typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+(""+t).replace(/[=:]/g,(function(t){return e[t]}))}(t.key):e.toString(36)}function I(t,e){t.func.call(t.context,e,t.count++)}function D(t,e,n){var r=t.result,i=t.keyPrefix;t=t.func.call(t.context,e,t.count++),Array.isArray(t)?$(t,r,n,(function(t){return t})):null!=t&&(R(t)&&(t=function(t,e){return{$$typeof:o,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(t,i+(!t.key||e&&e.key===t.key?"":(""+t.key).replace(S,"$&/")+"/")+n)),r.push(t))}function $(t,e,n,r,i){var o="";null!=n&&(o=(""+n).replace(S,"$&/")+"/"),V(t,D,e=T(e,o,r,i)),A(e)}var N={current:null};function F(){var t=N.current;if(null===t)throw Error(v(321));return t}var q={ReactCurrentDispatcher:N,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:k,IsSomeRendererActing:{current:!1},assign:r};e.Children={map:function(t,e,n){if(null==t)return t;var r=[];return $(t,r,null,e,n),r},forEach:function(t,e,n){if(null==t)return t;V(t,I,e=T(null,null,e,n)),A(e)},count:function(t){return V(t,(function(){return null}),null)},toArray:function(t){var e=[];return $(t,e,null,(function(t){return t})),e},only:function(t){if(!R(t))throw Error(v(143));return t}},e.Component=g,e.Fragment=a,e.Profiler=l,e.PureComponent=j,e.StrictMode=u,e.Suspense=p,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=q,e.cloneElement=function(t,e,n){if(null==t)throw Error(v(267,t));var i=r({},t.props),s=t.key,a=t.ref,u=t._owner;if(null!=e){if(void 0!==e.ref&&(a=e.ref,u=k.current),void 0!==e.key&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)P.call(e,c)&&!w.hasOwnProperty(c)&&(i[c]=void 0===e[c]&&void 0!==l?l[c]:e[c])}var c=arguments.length-2;if(1===c)i.children=n;else if(1<c){l=Array(c);for(var f=0;f<c;f++)l[f]=arguments[f+2];i.children=l}return{$$typeof:o,type:t.type,key:s,ref:a,props:i,_owner:u}},e.createContext=function(t,e){return void 0===e&&(e=null),(t={$$typeof:f,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:c,_context:t},t.Consumer=t},e.createElement=E,e.createFactory=function(t){var e=E.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:h,render:t}},e.isValidElement=R,e.lazy=function(t){return{$$typeof:y,_ctor:t,_status:-1,_result:null}},e.memo=function(t,e){return{$$typeof:d,type:t,compare:void 0===e?null:e}},e.useCallback=function(t,e){return F().useCallback(t,e)},e.useContext=function(t,e){return F().useContext(t,e)},e.useDebugValue=function(){},e.useEffect=function(t,e){return F().useEffect(t,e)},e.useImperativeHandle=function(t,e,n){return F().useImperativeHandle(t,e,n)},e.useLayoutEffect=function(t,e){return F().useLayoutEffect(t,e)},e.useMemo=function(t,e){return F().useMemo(t,e)},e.useReducer=function(t,e,n){return F().useReducer(t,e,n)},e.useRef=function(t){return F().useRef(t)},e.useState=function(t){return F().useState(t)},e.version="16.13.1"},62:function(t,e,n){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function s(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(t){r[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var n,a,u=s(t),l=1;l<arguments.length;l++){for(var c in n=Object(arguments[l]))i.call(n,c)&&(u[c]=n[c]);if(r){a=r(n);for(var f=0;f<a.length;f++)o.call(n,a[f])&&(u[a[f]]=n[a[f]])}}return u}},67:function(t,e,n){"use strict";n.r(e),n.d(e,"BindingBase",(function(){return c})),n.d(e,"BindingElementToObservers",(function(){return b})),n.d(e,"BindingObserversToElement",(function(){return S})),n.d(e,"BindingTwoWay",(function(){return q})),n.d(e,"Events",(function(){return r.a})),n.d(e,"History",(function(){return z})),n.d(e,"Observer",(function(){return J})),n.d(e,"ObserverHistory",(function(){return X})),n.d(e,"ObserverList",(function(){}));var r=n(7);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=l(t);if(e){var i=l(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return u(this,n)}}function u(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var c=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(u,t);var e,n,r,i=a(u);function u(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),t||(t={}),(e=i.call(this))._observers=null,e._paths=null,e._applyingChange=!1,e._element=t.element||null,e._history=t.history||null,e._historyPrefix=t.historyPrefix||null,e._historyPostfix=t.historyPostfix||null,e._historyName=t.historyName||null,e._historyCombine=t.historyCombine||!1,e._linked=!1,e}return e=u,(n=[{key:"_pathAt",value:function(t,e){return t[e]||t[0]}},{key:"link",value:function(t,e){this._observers&&this.unlink(),this._observers=Array.isArray(t)?t:[t],this._paths=Array.isArray(e)?e:[e],this._linked=!0}},{key:"unlink",value:function(){this._observers=null,this._paths=null,this._linked=!1}},{key:"clone",value:function(){throw new Error("pcui.BindingBase#clone: Not implemented")}},{key:"setValue",value:function(t){}},{key:"setValues",value:function(t){}},{key:"addValue",value:function(t){}},{key:"addValues",value:function(t){}},{key:"removeValue",value:function(t){}},{key:"removeValues",value:function(t){}},{key:"element",get:function(){return this._element},set:function(t){this._element=t}},{key:"applyingChange",get:function(){return this._applyingChange},set:function(t){this._applyingChange!==t&&(this._applyingChange=t,this.emit("applyingChange",t))}},{key:"linked",get:function(){return this._linked}},{key:"historyCombine",get:function(){return this._historyCombine},set:function(t){this._historyCombine=t}},{key:"historyName",get:function(){return this._historyName},set:function(t){this._historyName=t}},{key:"historyPrefix",get:function(){return this._historyPrefix},set:function(t){this._historyPrefix=t}},{key:"historyPostfix",get:function(){return this._historyPostfix},set:function(t){this._historyPostfix=t}},{key:"observers",get:function(){return this._observers}},{key:"paths",get:function(){return this._paths}}])&&o(e.prototype,n),r&&o(e,r),u}(r.a);function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=v(t);if(e){var i=v(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _(this,n)}}function _(t,e){return!e||"object"!==f(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var b=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}(o,t);var e,n,r,i=y(o);function o(){return h(this,o),i.apply(this,arguments)}return e=o,(n=[{key:"clone",value:function(){return new o({history:this._history,historyPrefix:this._historyPrefix,historyPostfix:this._historyPostfix,historyName:this._historyName,historyCombine:this._historyCombine})}},{key:"_getHistoryActionName",value:function(t){return"".concat(this._historyPrefix||"").concat(this._historyName||t[0]).concat(this._historyPostfix||"")}},{key:"_setValue",value:function(t,e){var n=this;if(!this.applyingChange&&this._observers){this.applyingChange=!0;var r=this._observers.slice(),i=this._paths.slice(),o=function(){n._setValueToObservers(r,i,t,e)};if(this._history){var s=[];s=1===r.length&&i.length>1?i.map((function(t){return r[0].has(t)?r[0].get(t):void 0})):r.map((function(t,e){var r=n._pathAt(i,e);return t.has(r)?t.get(r):void 0})),this._history.add({name:this._getHistoryActionName(i),redo:o,combine:this._historyCombine,undo:function(){n._setValueToObservers(r,i,s,!0)}})}o(),this.applyingChange=!1}}},{key:"_setValueToObservers",value:function(t,e,n,r){if(1===t.length&&e.length>1)for(var i=0;i<e.length;i++){var o=t[0].latest();if(o){var s=!1;o.history&&(s=o.history.enabled,o.history.enabled=!1);var a=e[i],u=n[i];void 0!==n?o.set(a,u):o.unset(a),s&&(o.history.enabled=!0)}}else for(var l=0;l<t.length;l++){var c=t[l].latest();if(c){var f=!1;c.history&&(f=c.history.enabled,c.history.enabled=!1);var h=this._pathAt(e,l),p=r?n[l]:n;void 0!==n?c.set(h,p):c.unset(h),f&&(c.history.enabled=!0)}}}},{key:"_addValues",value:function(t){var e=this;if(!this.applyingChange&&this._observers){this.applyingChange=!0;for(var n=this._observers.slice(),r=this._paths.slice(),i=[],o=function(o){var s=e._pathAt(r,o),a=n[o];t.forEach((function(t){-1===a.get(s).indexOf(t)&&i.push({observer:a,path:s,value:t})}))},s=0;s<n.length;s++)o(s);var a=function(){for(var t=0;t<i.length;t++){var e=i[t].observer.latest();if(e){var n=i[t].path,r=!1;e.history&&(r=e.history.enabled,e.history.enabled=!1),e.insert(n,i[t].value),r&&(e.history.enabled=!0)}}};this._history&&i.length&&this._history.add({name:this._getHistoryActionName(r),redo:a,combine:this._historyCombine,undo:function(){for(var t=0;t<i.length;t++){var e=i[t].observer.latest();if(e){var n=i[t].path,r=!1;e.history&&(r=e.history.enabled,e.history.enabled=!1),e.removeValue(n,i[t].value),r&&(e.history.enabled=!0)}}}}),a(),this.applyingChange=!1}}},{key:"_removeValues",value:function(t){var e=this;if(!this.applyingChange&&this._observers){this.applyingChange=!0;for(var n=this._observers.slice(),r=this._paths.slice(),i=[],o=function(o){var s=e._pathAt(r,o),a=n[o];t.forEach((function(t){var e=a.get(s).indexOf(t);-1!==e&&i.push({observer:a,path:s,value:t,index:e})}))},s=0;s<n.length;s++)o(s);var a=function(){for(var t=0;t<i.length;t++){var e=i[t].observer.latest();if(e){var n=i[t].path,r=!1;e.history&&(r=e.history.enabled,e.history.enabled=!1),e.removeValue(n,i[t].value),r&&(e.history.enabled=!0)}}};this._history&&i.length&&this._history.add({name:this._getHistoryActionName(r),redo:a,combine:this._historyCombine,undo:function(){for(var t=0;t<i.length;t++){var e=i[t].observer.latest();if(e){var n=i[t].path,r=!1;e.history&&(r=e.history.enabled,e.history.enabled=!1),-1===e.get(n).indexOf(i[t].value)&&e.insert(n,i[t].value,i[t].index),r&&(e.history.enabled=!0)}}}}),a(),this.applyingChange=!1}}},{key:"setValue",value:function(t){this._setValue(t,!1)}},{key:"setValues",value:function(t){t=t.slice().map((function(t){return Array.isArray(t)?t.slice():t})),this._setValue(t,!0)}},{key:"addValue",value:function(t){this._addValues([t])}},{key:"addValues",value:function(t){this._addValues(t)}},{key:"removeValue",value:function(t){this._removeValues([t])}},{key:"removeValues",value:function(t){this._removeValues(t)}}])&&p(e.prototype,n),r&&p(e,r),o}(c);function m(t){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function g(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function O(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function j(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function x(t,e,n){return(x="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=R(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function k(t,e){return(k=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function P(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=R(t);if(e){var i=R(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return w(this,n)}}function w(t,e){return!e||"object"!==m(e)&&"function"!=typeof e?E(t):e}function E(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function R(t){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var S=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&k(t,e)}(o,t);var e,n,r,i=P(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.customUpdate,r=g(e,["customUpdate"]);return O(this,o),(t=i.call(this,r))._customUpdate=n,t._events=[],t._updateElementHandler=t._updateElement.bind(E(t)),t._updateTimeout=null,t}return e=o,(n=[{key:"_linkObserver",value:function(t,e){this._events.push(t.on(e+":set",this._deferUpdateElement.bind(this))),this._events.push(t.on(e+":unset",this._deferUpdateElement.bind(this))),this._events.push(t.on(e+":insert",this._deferUpdateElement.bind(this))),this._events.push(t.on(e+":remove",this._deferUpdateElement.bind(this)))}},{key:"_deferUpdateElement",value:function(){this.applyingChange||(this.applyingChange=!0,this._updateTimeout=setTimeout(this._updateElementHandler))}},{key:"_updateElement",value:function(){var t=this;this._updateTimeout&&(clearTimeout(this._updateTimeout),this._updateTimeout=null),this._updateTimeout=null,this.applyingChange=!0,"function"==typeof this._customUpdate?this._customUpdate(this._element,this._observers,this._paths):1===this._observers.length?this._paths.length>1?this._element.value=this._paths.map((function(e){return t._observers[0].has(e)?t._observers[0].get(e):void 0})):this._element.value=this._observers[0].has(this._paths[0])?this._observers[0].get(this._paths[0]):void 0:this._element.values=this._observers.map((function(e,n){var r=t._pathAt(t._paths,n);return e.has(r)?e.get(r):void 0})),this.applyingChange=!1}},{key:"link",value:function(t,e){x(R(o.prototype),"link",this).call(this,t,e);var n=this._element.renderChanges;if(n&&(this._element.renderChanges=!1),this._updateElement(),n&&(this._element.renderChanges=n),1===this._observers.length&&this._paths.length>1)for(var r=0;r<this._paths.length;r++)this._linkObserver(this._observers[0],this._paths[r]);else for(var i=0;i<this._observers.length;i++)this._linkObserver(this._observers[i],this._pathAt(this._paths,i))}},{key:"unlink",value:function(){for(var t=0;t<this._events.length;t++)this._events[t].unbind();this._events.length=0,this._updateTimeout&&(clearTimeout(this._updateTimeout),this._updateTimeout=null),x(R(o.prototype),"unlink",this).call(this)}},{key:"clone",value:function(){return new o}}])&&j(e.prototype,n),r&&j(e,r),o}(c);function C(t){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function T(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function A(t,e,n,r){return(A="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(t,e,n,r){var i,o=I(t,e);if(o){if((i=Object.getOwnPropertyDescriptor(o,e)).set)return i.set.call(r,n),!0;if(!i.writable)return!1}if(i=Object.getOwnPropertyDescriptor(r,e)){if(!i.writable)return!1;i.value=n,Object.defineProperty(r,e,i)}else!function(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(r,e,n);return!0})(t,e,n,r)}function V(t,e,n,r,i){if(!A(t,e,n,r||t)&&i)throw new Error("failed to set property");return n}function U(t,e,n){return(U="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=I(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function I(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=F(t)););return t}function D(t,e){return(D=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function $(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=F(t);if(e){var i=F(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return N(this,n)}}function N(t,e){return!e||"object"!==C(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function F(t){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var q=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&D(t,e)}(o,t);var e,n,r,i=$(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),t||(t={}),(e=i.call(this,t))._bindingElementToObservers=t.bindingElementToObservers||new b(t),e._bindingObserversToElement=t.bindingObserversToElement||new S(t),e._applyingChange=!1,e._bindingElementToObservers.on("applyingChange",(function(t){e.applyingChange=t})),e._bindingObserversToElement.on("applyingChange",(function(t){e.applyingChange=t})),e}return e=o,(n=[{key:"link",value:function(t,e){U(F(o.prototype),"link",this).call(this,t,e),this._bindingElementToObservers.link(t,e),this._bindingObserversToElement.link(t,e)}},{key:"unlink",value:function(){this._bindingElementToObservers.unlink(),this._bindingObserversToElement.unlink(),U(F(o.prototype),"unlink",this).call(this)}},{key:"clone",value:function(){return new o({bindingElementToObservers:this._bindingElementToObservers.clone(),bindingObserversToElement:this._bindingObserversToElement.clone()})}},{key:"setValue",value:function(t){this._bindingElementToObservers.setValue(t)}},{key:"setValues",value:function(t){this._bindingElementToObservers.setValues(t)}},{key:"addValue",value:function(t){this._bindingElementToObservers.addValue(t)}},{key:"addValues",value:function(t){this._bindingElementToObservers.addValues(t)}},{key:"removeValue",value:function(t){this._bindingElementToObservers.removeValue(t)}},{key:"removeValues",value:function(t){this._bindingElementToObservers.removeValues(t)}},{key:"element",get:function(){return this._element},set:function(t){this._element=t,this._bindingElementToObservers.element=t,this._bindingObserversToElement.element=t}},{key:"applyingChange",get:function(){return U(F(o.prototype),"applyingChange",this)},set:function(t){U(F(o.prototype),"applyingChange",this)!==t&&(this._bindingElementToObservers.applyingChange=t,this._bindingObserversToElement.applyingChange=t,V(F(o.prototype),"applyingChange",t,this,!0))}},{key:"historyCombine",get:function(){return this._bindingElementToObservers.historyCombine},set:function(t){this._bindingElementToObservers.historyCombine=t}},{key:"historyPrefix",get:function(){return this._bindingElementToObservers.historyPrefix},set:function(t){this._bindingElementToObservers.historyPrefix=t}},{key:"historyPostfix",get:function(){return this._bindingElementToObservers.historyPostfix},set:function(t){this._bindingElementToObservers.historyPostfix=t}}])&&T(e.prototype,n),r&&T(e,r),o}(c);function B(t){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function H(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function M(t,e){return(M=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function W(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=L(t);if(e){var i=L(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return K(this,n)}}function K(t,e){return!e||"object"!==B(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function L(t){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var z=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&M(t,e)}(o,t);var e,n,r,i=W(o);function o(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(t=i.call(this))._actions=[],t._currentActionIndex=-1,t._canUndo=!1,t._canRedo=!1,t}return e=o,(n=[{key:"add",value:function(t){if(t.name)if(t.undo)if(t.redo){if(this._currentActionIndex!==this._actions.length-1&&(this._actions=this._actions.slice(0,this._currentActionIndex+1)),t.combine&&this.currentAction&&this.currentAction.name===t.name)this.currentAction.redo=t.redo;else{var e=this._actions.push(t);this._currentActionIndex=e-1}this.emit("add",t.name),this.canUndo=!0,this.canRedo=!1}else console.error("Trying to add history action without redo method",t.name);else console.error("Trying to add history action without undo method",t.name);else console.error("Trying to add history action without name")}},{key:"undo",value:function(){if(this.canUndo){var t=this.currentAction.name;try{this.currentAction.undo()}catch(t){return console.info("%c(pcui.History#undo)","color: #f00"),void console.log(t.stack)}this._currentActionIndex--,this.emit("undo",t),this._currentActionIndex<0&&(this.canUndo=!1),this.canRedo=!0}}},{key:"redo",value:function(){if(this.canRedo){this._currentActionIndex++;try{this.currentAction.redo()}catch(t){return console.info("%c(pcui.History#redo)","color: #f00"),void console.log(t.stack)}this.emit("redo",this.currentAction.name),this.canUndo=!0,this._currentActionIndex===this._actions.length-1&&(this.canRedo=!1)}}},{key:"clear",value:function(){this._actions.length&&(this._actions.length=0,this._currentActionIndex=-1,this.canUndo=!1,this.canRedo=!1)}},{key:"currentAction",get:function(){return this._actions[this._currentActionIndex]||null}},{key:"lastAction",get:function(){return this._actions[this._actions.length-1]||null}},{key:"canUndo",get:function(){return this._canUndo},set:function(t){this._canUndo!==t&&(this._canUndo=t,this.emit("canUndo",t))}},{key:"canRedo",get:function(){return this._canRedo},set:function(t){this._canRedo!==t&&(this._canRedo=t,this.emit("canRedo",t))}}])&&H(e.prototype,n),r&&H(e,r),o}(r.a);n(6);function Y(t){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function G(t,e){if(r.a.call(this),e=e||{},this._destroyed=!1,this._path="",this._keys=[],this._data={},this._pathsWithDuplicates=null,e.pathsWithDuplicates){this._pathsWithDuplicates={};for(var n=0;n<e.pathsWithDuplicates.length;n++)this._pathsWithDuplicates[e.pathsWithDuplicates[n]]=!0}this.patch(t),this._parent=e.parent||null,this._parentPath=e.parentPath||"",this._parentField=e.parentField||null,this._parentKey=e.parentKey||null,this._latestFn=e.latestFn||null,this._silent=!1;var i=function(t){return function(e,n,r,i){if(this._parent){var o,s=this._parentKey;if(s||!(this._parentField instanceof Array)||-1!==(s=this._parentField.indexOf(this)))e=this._parentPath+"."+s+"."+e,this._silent&&(o=this._parent.silence()),this._parent.emit(e+":"+t,n,r,i),this._parent.emit("*:"+t,e,n,r,i),this._silent&&this._parent.silenceRestore(o)}}};this.on("*:set",i("set")),this.on("*:unset",i("unset")),this.on("*:insert",i("insert")),this.on("*:remove",i("remove")),this.on("*:move",i("move"))}G._splitPathsCache={},G._splitPath=function(t){var e=G._splitPathsCache,n=e[t];return n?n=n.slice():(n=t.split("."),e[t]=n),n},G.prototype=Object.create(r.a.prototype),G.prototype.silence=function(){this._silent=!0;var t=this.history&&this.history.enabled;t&&(this.history.enabled=!1);var e=this.sync&&this.sync.enabled;return e&&(this.sync.enabled=!1),[t,e]},G.prototype.silenceRestore=function(t){this._silent=!1,t[0]&&(this.history.enabled=!0),t[1]&&(this.sync.enabled=!0)},G.prototype._prepare=function(t,e,n,r,i){var o,s=(t._path?t._path+".":"")+e,a=Y(n);if(t._keys.push(e),"object"===a&&n instanceof Array){t._data[e]=n.slice(0);for(var u=0;u<t._data[e].length;u++)"object"===Y(t._data[e][u])&&null!==t._data[e][u]?t._data[e][u]instanceof Array?t._data[e][u].slice(0):t._data[e][u]=new G(t._data[e][u],{parent:this,parentPath:s,parentField:t._data[e],parentKey:null}):(o=this.silence(),this.emit(s+"."+u+":set",t._data[e][u],null,i),this.emit("*:set",s+"."+u,t._data[e][u],null,i),this.silenceRestore(o));r&&(o=this.silence()),this.emit(s+":set",t._data[e],null,i),this.emit("*:set",s,t._data[e],null,i),r&&this.silenceRestore(o)}else if("object"===a&&n instanceof Object){for(var u in"object"!==Y(t._data[e])&&(t._data[e]={_path:s,_keys:[],_data:{}}),n)"object"===Y(n[u])?this._prepare(t._data[e],u,n[u],!0,i):(o=this.silence(),t._data[e]._data[u]=n[u],t._data[e]._keys.push(u),this.emit(s+"."+u+":set",n[u],null,i),this.emit("*:set",s+"."+u,n[u],null,i),this.silenceRestore(o));r&&(o=this.silence()),this.emit(s+":set",n,void 0,i),this.emit("*:set",s,n,void 0,i),r&&this.silenceRestore(o)}else r&&(o=this.silence()),t._data[e]=n,this.emit(s+":set",n,void 0,i),this.emit("*:set",s,n,void 0,i),r&&this.silenceRestore(o);return!0},G.prototype.set=function(t,e,n,r,i){for(var o,s,a=this,u=(v=G._splitPath(t)).length,l=v[u-1],c=this,f="",h=this,p=0;p<u-1;p++)c instanceof Array?(c=c[v[p]])instanceof G&&(t=v.slice(p+1).join("."),h=c):(p<u&&"object"!==Y(c._data[v[p]])&&(c._data[v[p]]&&h.unset((c.__path?c.__path+".":"")+v[p]),c._data[v[p]]={_path:t,_keys:[],_data:{}},c._keys.push(v[p])),p===u-1&&c.__path&&(f=c.__path+"."+v[p]),c=c._data[v[p]]);if(c instanceof Array){var d=parseInt(l,10);if(c[d]===e&&!i)return;return y=(y=c[d])instanceof G?y.json():h.json(y),c[d]=e,e instanceof G&&(e._parent=h,e._parentPath=f,e._parentField=c,e._parentKey=null),n&&(o=h.silence()),h.emit(t+":set",e,y,r),h.emit("*:set",t,e,y,r),n&&h.silenceRestore(o),!0}if(c._data&&!c._data.hasOwnProperty(l))return"object"===Y(e)?h._prepare(c,l,e,!1,r):(c._data[l]=e,c._keys.push(l),n&&(o=h.silence()),h.emit(t+":set",e,null,r),h.emit("*:set",t,e,null,r),n&&h.silenceRestore(o),!0);if("object"===Y(e)&&e instanceof Array){if(e.equals(c._data[l])&&!i)return!1;if((y=c._data[l])instanceof G||(y=h.json(y)),c._data[l]&&c._data[l].length===e.length){o=h.silence(),0===e.length&&(c._data[l]=e);for(p=0;p<c._data[l].length;p++)c._data[l][p]instanceof G?c._data[l][p].patch(e[p],!0):c._data[l][p]!==e[p]&&(c._data[l][p]=e[p],h.emit(t+"."+p+":set",c._data[l][p],y&&y[p]||null,r),h.emit("*:set",t+"."+p,c._data[l][p],y&&y[p]||null,r));h.silenceRestore(o)}else{c._data[l]=[],e.forEach((function(t){a._doInsert(c,l,t)})),o=h.silence();for(p=0;p<c._data[l].length;p++)h.emit(t+"."+p+":set",c._data[l][p],y&&y[p]||null,r),h.emit("*:set",t+"."+p,c._data[l][p],y&&y[p]||null,r);h.silenceRestore(o)}return n&&(o=h.silence()),h.emit(t+":set",e,y,r),h.emit("*:set",t,e,y,r),n&&h.silenceRestore(o),!0}if("object"===Y(e)&&e instanceof Object){var y,_=!1;(y=c._data[l])instanceof G||(y=h.json(y));var v=Object.keys(e);for(var b in c._data[l]&&c._data[l]._data||(c._data[l]?h.unset((c.__path?c.__path+".":"")+l):_=!0,c._data[l]={_path:t,_keys:[],_data:{}}),c._data[l]._data){if(e.hasOwnProperty(b))if(c._data[l]._data.hasOwnProperty(b)){if(!h._equals(c._data[l]._data[b],e[b]))h.set(t+"."+b,e[b],!0)&&(_=!0)}else{h._prepare(c._data[l],b,e[b],!0,r)&&(_=!0)}else h.unset(t+"."+b,!0)&&(_=!0)}for(p=0;p<v.length;p++){if(void 0===e[v[p]]&&c._data[l]._data.hasOwnProperty(v[p]))h.unset(t+"."+v[p],!0)&&(_=!0);else if("object"===Y(e[v[p]])){if(c._data[l]._data.hasOwnProperty(v[p]))h.set(t+"."+v[p],e[v[p]],!0)&&(_=!0);else h._prepare(c._data[l],v[p],e[v[p]],!0,r)&&(_=!0)}else if(!h._equals(c._data[l]._data[v[p]],e[v[p]])){if("object"===Y(e[v[p]]))h.set(c._data[l]._path+"."+v[p],e[v[p]],!0)&&(_=!0);else c._data[l]._data[v[p]]!==e[v[p]]&&(_=!0,-1===c._data[l]._keys.indexOf(v[p])&&c._data[l]._keys.push(v[p]),c._data[l]._data[v[p]]=e[v[p]],o=h.silence(),h.emit(c._data[l]._path+"."+v[p]+":set",c._data[l]._data[v[p]],null,r),h.emit("*:set",c._data[l]._path+"."+v[p],c._data[l]._data[v[p]],null,r),h.silenceRestore(o))}}if(_){n&&(o=h.silence());var m=h.json(c._data[l]);return h.emit(c._data[l]._path+":set",m,y,r),h.emit("*:set",c._data[l]._path,m,y,r),n&&h.silenceRestore(o),!0}return!1}return!((s=!c.hasOwnProperty("_data")&&c.hasOwnProperty(l)?c:c._data)[l]===e&&!i)&&(n&&(o=h.silence()),(y=s[l])instanceof G||(y=h.json(y)),s[l]=e,h.emit(t+":set",e,y,r),h.emit("*:set",t,e,y,r),n&&h.silenceRestore(o),!0)},G.prototype.has=function(t){for(var e=G._splitPath(t),n=this,r=0,i=e.length;r<i;r++){if(null==n)return;n=n._data?n._data[e[r]]:n[e[r]]}return void 0!==n},G.prototype.get=function(t,e){for(var n=G._splitPath(t),r=this,i=0;i<n.length;i++){if(null==r)return;r=r._data?r._data[n[i]]:r[n[i]]}return e?r:null==r?null:this.json(r)},G.prototype.getRaw=function(t){return this.get(t,!0)},G.prototype._equals=function(t,e){return t===e||!!(t instanceof Array&&e instanceof Array&&t.equals(e))},G.prototype.unset=function(t,e,n){for(var r=G._splitPath(t),i=r[r.length-1],o=this,s=this,a=0;a<r.length-1;a++)o instanceof Array?(o=o[r[a]])instanceof G&&(t=r.slice(a+1).join("."),s=o):o=o._data[r[a]];if(!o._data||!o._data.hasOwnProperty(i))return!1;var u,l=o._data[i];if(l instanceof G||(l=s.json(l)),o._data[i]&&o._data[i]._data)for(a=o._data[i]._keys.length-1;a>=0;a--)s.unset(t+"."+o._data[i]._keys[a],!0);return o._keys.splice(o._keys.indexOf(i),1),delete o._data[i],e&&(u=s.silence()),s.emit(t+":unset",l,n),s.emit("*:unset",t,l,n),e&&s.silenceRestore(u),!0},G.prototype.remove=function(t,e,n,r){for(var i=G._splitPath(t),o=i[i.length-1],s=this,a=this,u=0;u<i.length-1;u++)if(s instanceof Array)(s=s[parseInt(i[u],10)])instanceof G&&(t=i.slice(u+1).join("."),a=s);else{if(!s._data||!s._data.hasOwnProperty(i[u]))return;s=s._data[i[u]]}if(s._data&&s._data.hasOwnProperty(o)&&s._data[o]instanceof Array){var l=s._data[o];if(!(l.length<e)){var c,f=l[e];return f instanceof G?f._parent=null:f=a.json(f),l.splice(e,1),n&&(c=a.silence()),a.emit(t+":remove",f,e,r),a.emit("*:remove",t,f,e,r),n&&a.silenceRestore(c),!0}}},G.prototype.removeValue=function(t,e,n,r){for(var i=G._splitPath(t),o=i[i.length-1],s=this,a=this,u=0;u<i.length-1;u++)if(s instanceof Array)(s=s[parseInt(i[u],10)])instanceof G&&(t=i.slice(u+1).join("."),a=s);else{if(!s._data||!s._data.hasOwnProperty(i[u]))return;s=s._data[i[u]]}if(s._data&&s._data.hasOwnProperty(o)&&s._data[o]instanceof Array){var l,c=s._data[o],f=c.indexOf(e);if(-1!==f)if(!(c.length<f))return(e=c[f])instanceof G?e._parent=null:e=a.json(e),c.splice(f,1),n&&(l=a.silence()),a.emit(t+":remove",e,f,r),a.emit("*:remove",t,e,f,r),n&&a.silenceRestore(l),!0}},G.prototype.insert=function(t,e,n,r,i){for(var o=G._splitPath(t),s=o[o.length-1],a=this,u=this,l=0;l<o.length-1;l++)if(a instanceof Array)(a=a[parseInt(o[l],10)])instanceof G&&(t=o.slice(l+1).join("."),u=a);else{if(!a._data||!a._data.hasOwnProperty(o[l]))return;a=a._data[o[l]]}if(a._data&&a._data.hasOwnProperty(s)&&a._data[s]instanceof Array){var c,f=a._data[s];return e=u._doInsert(a,s,e,n),void 0===n&&(n=f.length-1),r&&(c=u.silence()),u.emit(t+":insert",e,n,i),u.emit("*:insert",t,e,n,i),r&&u.silenceRestore(c),!0}},G.prototype._doInsert=function(t,e,n,r){var i=t._data[e];"object"!==Y(n)||n instanceof G||null===n||(n=n instanceof Array?n.slice(0):new G(n));var o=t._path?"".concat(t._path,".").concat(e):e;if(null===n||this._pathsWithDuplicates&&this._pathsWithDuplicates[o]||-1===i.indexOf(n))return void 0===r?i.push(n):i.splice(r,0,n),n instanceof G?(n._parent=this,n._parentPath=o,n._parentField=i,n._parentKey=null):n=this.json(n),n},G.prototype.move=function(t,e,n,r,i){for(var o=G._splitPath(t),s=o[o.length-1],a=this,u=this,l=0;l<o.length-1;l++)if(a instanceof Array)(a=a[parseInt(o[l],10)])instanceof G&&(t=o.slice(l+1).join("."),u=a);else{if(!a._data||!a._data.hasOwnProperty(o[l]))return;a=a._data[o[l]]}if(a._data&&a._data.hasOwnProperty(s)&&a._data[s]instanceof Array){var c=a._data[s];if(!(c.length<e||c.length<n||e===n)){var f,h=c[e];return c.splice(e,1),-1===n&&(n=c.length),c.splice(n,0,h),h instanceof G||(h=u.json(h)),r&&(f=u.silence()),u.emit(t+":move",h,n,e,i),u.emit("*:move",t,h,n,e,i),r&&u.silenceRestore(f),!0}}},G.prototype.patch=function(t,e){if("object"===Y(t)){for(var n in t)"object"!==Y(t[n])||this._data.hasOwnProperty(n)?this._data[n]!==t[n]&&this.set(n,t[n]):this._prepare(this,n,t[n]);if(e)for(var n in this._data)t.hasOwnProperty(n)||this.unset(n)}},G.prototype.json=function(t){var e,n,r={},i=void 0===t?this:t;if(i instanceof Object&&i._keys){e=i._keys.length;for(var o=0;o<e;o++){var s=i._keys[o],a=i._data[s],u=Y(a);if("object"===u&&a instanceof Array){r[s]=a.slice(0),n=r[s].length;for(var l=0;l<n;l++)"object"===Y(r[s][l])&&(r[s][l]=this.json(r[s][l]))}else r[s]="object"===u&&a instanceof Object?this.json(a):a}}else{if(null===i)return null;if("object"===Y(i)&&i instanceof Array){e=(r=i.slice(0)).length;for(l=0;l<e;l++)r[l]=this.json(r[l])}else if("object"===Y(i))for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s]);else r=i}return r},G.prototype.forEach=function(t,e,n){var r=e||this;n=n||"";for(var i=0;i<r._keys.length;i++){var o=r._keys[i],s=r._data[o],a=this.schema&&this.schema.has(n+o)&&this.schema.get(n+o).type.name.toLowerCase()||Y(s);"object"===a&&s instanceof Array?t(n+o,"array",s,o):"object"===a&&s instanceof Object?(t(n+o,"object",s,o),this.forEach(t,s,n+o+".")):t(n+o,a,s,o)}},G.prototype.latest=function(){return this._latestFn?this._latestFn():this},G.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,this.emit("destroy"),this.unbind())},Object.defineProperty(G.prototype,"latestFn",{get:function(){return this._latestFn},set:function(t){this._latestFn=t}});var J=G;function Q(t){r.a.call(this),t=t||{},this.item=t.item,this._history=t.history,this._enabled=t.enabled||!0,this._prefix=t.prefix||"",this._combine=t.combine||!1,this._events=[],this._initialize()}Q.prototype=Object.create(r.a.prototype),Q.prototype._initialize=function(){var t=this;this._events.push(this.item.on("*:set",(function(e,n,r){if(t._enabled&&t._history){n instanceof J&&(n=n.json());var i={name:t._prefix+e,combine:t._combine,undo:function(){var n=t.item.latest();n&&(n.history.enabled=!1,void 0===r?n.unset(e):n.set(e,r),n.history.enabled=!0)},redo:function(){var r=t.item.latest();r&&(r.history.enabled=!1,void 0===n?r.unset(e):r.set(e,n),r.history.enabled=!0)}};t._history.add(i)}}))),this._events.push(this.item.on("*:unset",(function(e,n){if(t._enabled&&t._history){var r={name:t._prefix+e,combine:t._combine,undo:function(){var r=t.item.latest();r&&(r.history.enabled=!1,r.set(e,n),r.history.enabled=!0)},redo:function(){var n=t.item.latest();n&&(n.history.enabled=!1,n.unset(e),n.history.enabled=!0)}};t._history.add(r)}}))),this._events.push(this.item.on("*:insert",(function(e,n,r){if(t._enabled&&t._history){var i={name:t._prefix+e,combine:t._combine,undo:function(){var r=t.item.latest();r&&(r.history.enabled=!1,r.removeValue(e,n),r.history.enabled=!0)},redo:function(){var i=t.item.latest();i&&(i.history.enabled=!1,i.insert(e,n,r),i.history.enabled=!0)}};t._history.add(i)}}))),this._events.push(this.item.on("*:remove",(function(e,n,r){if(t._enabled&&t._history){var i={name:t._prefix+e,combine:t._combine,undo:function(){var i=t.item.latest();i&&(i.history.enabled=!1,i.insert(e,n,r),i.history.enabled=!0)},redo:function(){var r=t.item.latest();r&&(r.history.enabled=!1,r.removeValue(e,n),r.history.enabled=!0)}};t._history.add(i)}}))),this._events.push(this.item.on("*:move",(function(e,n,r,i){if(t._enabled&&t._history){var o={name:t._prefix+e,combine:t._combine,undo:function(){var n=t.item.latest();n&&(n.history.enabled=!1,n.move(e,r,i),n.history.enabled=!0)},redo:function(){var n=t.item.latest();n&&(n.history.enabled=!1,n.move(e,i,r),n.history.enabled=!0)}};t._history.add(o)}})))},Q.prototype.destroy=function(){this._events.forEach((function(t){t.unbind()})),this._events.length=0,this.item=null},Object.defineProperty(Q.prototype,"enabled",{get:function(){return this._enabled},set:function(t){this._enabled=!!t}}),Object.defineProperty(Q.prototype,"prefix",{get:function(){return this._prefix},set:function(t){this._prefix=t||""}}),Object.defineProperty(Q.prototype,"combine",{get:function(){return this._combine},set:function(t){this._combine=!!t}});var X=Q;function Z(t){r.a.call(this),t=t||{},this.data=[],this._indexed={},this.sorted=t.sorted||null,this.index=t.index||null}Z.prototype=Object.create(r.a.prototype),Object.defineProperty(Z.prototype,"length",{get:function(){return this.data.length}}),Z.prototype.get=function(t){return this.index?this._indexed[t]||null:this.data[t]||null},Z.prototype.set=function(t,e){this.index?this._indexed[t]=e:this.data[t]=e},Z.prototype.indexOf=function(t){if(this.index){var e=t instanceof J&&t.get(this.index)||t[this.index];return this._indexed[e]&&e||null}var n=this.data.indexOf(t);return-1!==n?n:null},Z.prototype.position=function(t,e){var n,r,i=this.data,o=0,s=i.length-1;for(e=e||this.sorted;o<=s;)if(1===(r=e(i[n=Math.floor((o+s)/2)],t)))s=n-1;else{if(-1!==r)return n;o=n+1}return-1},Z.prototype.positionNextClosest=function(t,e){var n,r,i,o=this.data,s=0,a=o.length-1;if(e=e||this.sorted,0===o.length)return-1;if(0===e(o[0],t))return 0;for(;s<=a;)if(1===(i=e(r=o[n=Math.floor((s+a)/2)],t)))a=n-1;else{if(-1!==i)return n;s=n+1}return 1===e(r,t)?n:n+1===o.length?-1:n+1},Z.prototype.has=function(t){if(this.index){var e=t instanceof J&&t.get(this.index)||t[this.index];return!!this._indexed[e]}return-1!==this.data.indexOf(t)},Z.prototype.add=function(t){if(this.has(t))return null;var e=this.data.length;this.index&&(e=t instanceof J&&t.get(this.index)||t[this.index],this._indexed[e]=t);var n=0;return this.sorted?-1!==(n=this.positionNextClosest(t))?this.data.splice(n,0,t):this.data.push(t):(this.data.push(t),n=this.data.length-1),this.emit("add",t,e,n),n},Z.prototype.move=function(t,e){var n=this.data.indexOf(t);this.data.splice(n,1),-1===e?this.data.push(t):this.data.splice(e,0,t),this.emit("move",t,e)},Z.prototype.remove=function(t){if(this.has(t)){var e=this.data.indexOf(t),n=e;this.index&&(n=t instanceof J&&t.get(this.index)||t[this.index],delete this._indexed[n]),this.data.splice(e,1),this.emit("remove",t,n)}},Z.prototype.removeByKey=function(t){if(this.index){if(!(n=this._indexed[t]))return;var e=this.data.indexOf(n);this.data.splice(e,1),delete this._indexed[t],this.emit("remove",n,e)}else{if(this.data.length<t)return;var n=this.data[t];this.data.splice(t,1),this.emit("remove",n,t)}},Z.prototype.removeBy=function(t){for(var e=this.data.length;e--;)t(this.data[e])&&(this.index&&delete this._indexed[this.data[e][this.index]],this.data.splice(e,1),this.emit("remove",this.data[e],e))},Z.prototype.clear=function(){var t=this.data.slice(0);this.data=[],this._indexed={};for(var e=t.length;e--;)this.emit("remove",t[e],e)},Z.prototype.forEach=function(t){for(var e=0;e<this.data.length;e++)t(this.data[e],this.index&&this.data[e][this.index]||e)},Z.prototype.find=function(t){for(var e=[],n=0;n<this.data.length;n++)if(t(this.data[n])){var r=n;this.index&&(r=this.data[n][this.index]),e.push([r,this.data[n]])}return e},Z.prototype.findOne=function(t){for(var e=0;e<this.data.length;e++)if(t(this.data[e])){var n=e;return this.index&&(n=this.data[e][this.index]),[n,this.data[e]]}return null},Z.prototype.map=function(t){return this.data.map(t)},Z.prototype.sort=function(t){this.data.sort(t)},Z.prototype.array=function(){return this.data.slice(0)},Z.prototype.json=function(){for(var t=this.array(),e=0;e<t.length;e++)t[e]instanceof J&&(t[e]=t[e].json());return t}},7:function(t,e,n){"use strict";function r(){Object.defineProperty(this,"_events",{enumerable:!1,configurable:!1,writable:!0,value:{}}),this._suspendEvents=!1,Object.defineProperty(this,"suspendEvents",{get:function(){return this._suspendEvents},set:function(t){this._suspendEvents=!!t}})}function i(t,e,n){this.owner=t,this.name=e,this.fn=n}r.prototype.on=function(t,e){var n=this._events[t];return void 0===n?this._events[t]=[e]:-1===n.indexOf(e)&&n.push(e),new i(this,t,e)},r.prototype.once=function(t,e){var n=this,r=this.on(t,(function(t,i,o,s,a,u,l,c){e.call(n,t,i,o,s,a,u,l,c),r.unbind()}));return r},r.prototype.emit=function(t,e,n,r,i,o,s,a,u){if(!this._suspendEvents){var l=this._events[t];if(!l)return this;l=l.slice(0);for(var c=0;c<l.length;c++)if(l[c])try{l[c].call(this,e,n,r,i,o,s,a,u)}catch(e){console.info("%c%s %c(event error)","color: #06f",t,"color: #f00"),console.log(e.stack)}return this}},r.prototype.unbind=function(t,e){if(t){var n=this._events[t];if(!n)return this;if(e){var r=n.indexOf(e);-1!==r&&(1===n.length?delete this._events[t]:n.splice(r,1))}else delete this._events[t]}else this._events={};return this},i.prototype.unbind=function(){this.owner&&(this.owner.unbind(this.name,this.fn),this.owner=null,this.name=null,this.fn=null)},i.prototype.call=function(){this.fn&&this.fn.call(this.owner,arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7])},i.prototype.on=function(t,e){return this.owner.on(t,e)},e.a=r}})}));